{"ast":null,"code":"import React from \"react\";\nimport { connect } from \"react-redux\";\nimport Link from \"next/link\";\nimport { SetAccessToken } from \"../actions/Spotify\";\nimport axios from \"axios\";\n\nclass AccessToken extends React.Component {\n  componentDidMount() {\n    const {\n      dispatch,\n      accessToken,\n      at\n    } = this.props;\n    setInterval(async () => {\n      let accessTokenTmp = false;\n      const response = await axios.post(`${location.href}spotify/auth?code=${accessToken.refresh_token}`);\n\n      if (response.status == 200 && response.data) {\n        accessTokenTmp = response.data;\n      }\n\n      dispatch(SetAccessToken(accessTokenTmp));\n    }, at.expires_in);\n    dispatch(SetAccessToken(at));\n  }\n\n  render() {\n    return null;\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  console.log(state.Spotify.accessToken);\n  return {\n    accessToken: state.Spotify.accessToken\n  };\n}\n\nexport default connect(mapStateToProps)(AccessToken);","map":{"version":3,"sources":["/Users/agustinquetto/Documents/GitHub/courseit-musikit/components/AccessToken.js"],"names":["React","connect","Link","SetAccessToken","axios","AccessToken","Component","componentDidMount","dispatch","accessToken","at","props","setInterval","accessTokenTmp","response","post","location","href","refresh_token","status","data","expires_in","render","mapStateToProps","state","console","log","Spotify"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,SAASC,cAAT,QAA+B,oBAA/B;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,WAAN,SAA0BL,KAAK,CAACM,SAAhC,CAA0C;AACtCC,EAAAA,iBAAiB,GAAG;AAChB,UAAM;AAAEC,MAAAA,QAAF;AAAYC,MAAAA,WAAZ;AAAyBC,MAAAA;AAAzB,QAAgC,KAAKC,KAA3C;AACAC,IAAAA,WAAW,CAAC,YAAY;AACpB,UAAIC,cAAc,GAAG,KAArB;AACA,YAAMC,QAAQ,GAAG,MAAMV,KAAK,CAACW,IAAN,CAClB,GAAEC,QAAQ,CAACC,IAAK,qBAAoBR,WAAW,CAACS,aAAc,EAD5C,CAAvB;;AAGA,UAAIJ,QAAQ,CAACK,MAAT,IAAmB,GAAnB,IAA0BL,QAAQ,CAACM,IAAvC,EAA6C;AACzCP,QAAAA,cAAc,GAAGC,QAAQ,CAACM,IAA1B;AACH;;AACDZ,MAAAA,QAAQ,CAACL,cAAc,CAACU,cAAD,CAAf,CAAR;AACH,KATU,EASRH,EAAE,CAACW,UATK,CAAX;AAUAb,IAAAA,QAAQ,CAACL,cAAc,CAACO,EAAD,CAAf,CAAR;AACH;;AACDY,EAAAA,MAAM,GAAG;AACL,WAAO,IAAP;AACH;;AAjBqC;;AAoB1C,SAASC,eAAT,CAAyBC,KAAzB,EAAgC;AAC5BC,EAAAA,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACG,OAAN,CAAclB,WAA1B;AACA,SAAO;AACHA,IAAAA,WAAW,EAAEe,KAAK,CAACG,OAAN,CAAclB;AADxB,GAAP;AAGH;;AAED,eAAeR,OAAO,CAACsB,eAAD,CAAP,CAAyBlB,WAAzB,CAAf","sourcesContent":["import React from \"react\";\nimport { connect } from \"react-redux\";\nimport Link from \"next/link\";\nimport { SetAccessToken } from \"../actions/Spotify\";\nimport axios from \"axios\";\n\nclass AccessToken extends React.Component {\n    componentDidMount() {\n        const { dispatch, accessToken, at } = this.props;\n        setInterval(async () => {\n            let accessTokenTmp = false;\n            const response = await axios.post(\n                `${location.href}spotify/auth?code=${accessToken.refresh_token}`\n            );\n            if (response.status == 200 && response.data) {\n                accessTokenTmp = response.data;\n            }\n            dispatch(SetAccessToken(accessTokenTmp));\n        }, at.expires_in);\n        dispatch(SetAccessToken(at));\n    }\n    render() {\n        return null;\n    }\n}\n\nfunction mapStateToProps(state) {\n    console.log(state.Spotify.accessToken);\n    return {\n        accessToken: state.Spotify.accessToken\n    };\n}\n\nexport default connect(mapStateToProps)(AccessToken);\n"]},"metadata":{},"sourceType":"module"}